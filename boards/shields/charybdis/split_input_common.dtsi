#include <dt-bindings/zmk/input_transform.h>
#include <input/processors.dtsi>

#define DEF 0
#define NUM 1
#define NAV 2
#define SWT 3
#define FN 4
#define SCR 5
#define SNI 6
#define BOOT 7

/ {
    split_inputs {
        #address-cells = <1>;
        #size-cells = <0>;

        trackball_split: trackball_split@0 {
            compatible = "zmk,input-split";
            reg = <0>;

            /* 1. DEFAULT MOVEMENT CORRECTION */
            /* Use this to fix the trackball orientation for all layers */
            device {
                input-processors = <&zip_xy_transform (INPUT_TRANSFORM_X_INVERT | INPUT_TRANSFORM_Y_INVERT)>;
            };

            /* 2. SNIPE PROCESSOR */
            snipe {
                layers = <SNI>;
                input-processors = <&zip_xy_scaler 1 3>;
            };

            /* 3. SCROLL PROCESSOR */
            scroll {
                layers = <NAV>;
                /* Note: You can combine flags using | if needed */
                input-processors = <&zip_xy_transform (INPUT_TRANSFORM_X_INVERT | INPUT_TRANSFORM_Y_INVERT)>,
                                   <&zip_y_scaler 4 1>,
                                   <&zip_xy_to_scroll_mapper>;
            };
        };
    };
};
